@using Entities.Models
@using Service.Models
@using Entities.Enums;
@model Response<IEnumerable<CartItemSlide>>
@{
    decimal SubTotal = 0;
    decimal Total = 0;
}
<div class="checkout-details theme-form  section-big-mt-space">
    <div class="order-box">
        <div class="title-box">
            <div>Product <span>Total</span></div>
        </div>
        <ul class="qty">
            @if (Model.StatusCode == ResponseStatus.Success && Model.Result.Any())
            {
                @foreach (var item in Model.Result)
                {
                    <li>@item.Title × @item.Qty <span>@(item.SellingCost*item.Qty)</span></li>
                    SubTotal = (SubTotal + item.SellingCost * item.Qty);
                }
                Total = SubTotal;
            }
        </ul>
        <ul class="sub-total">
            <li>Subtotal <span class="count">@SubTotal</span></li>
            <li>
                Shipping
                <div class="shipping">
                    <div class="shopping-option">
                        <input type="checkbox" name="free-shipping" id="free-shipping" checked disabled>
                        <label for="free-shipping">Free Shipping</label>
                    </div>
                    <div class="shopping-option">
                        <input type="checkbox" name="local-pickup" id="local-pickup">
                        <label for="local-pickup">Local Pickup</label>
                    </div>
                </div>
            </li>
        </ul>
        <ul class="total">
            <li>Total <span class="count">@Total</span></li>
        </ul>
    </div>
    <div class="payment-box">
        <div class="upper-box">
            <div class="payment-options">
                <div class="main">
                    <h3 class="box-title">Select Payment Method</h3>
                    <div class='payments' id="dvPaymentModes">

                      @*  <div class='button '>
                          CADH
                         <br />
                         <img src="Image/icons/debit.svg" height="55px" />
                      </div>*@
                    </div>
                </div>
            </div>
        </div>
        <div class="text-right"><a href="javascript:void(0)" class="btn-normal btn btnPlaceOrder" id="btnPlaceOrder">Place Order</a></div>
    </div>
</div>
<script>
    $(document).ready(function () {
   $.post("/GetPaymentMode").done(res => {
       console.log(res.result);
        $.each(res.result, async function (i, v) {
            let current = i == 0 ? "checked" : "";
           $('#dvPaymentModes').append(`<div class='button '>
           <input type="radio" name="paymentMode" data-payment-Mode="${v.id}" ${current}>
                           ${v.name}
                           
                            <img src="${v.icon}" />
                        </div>`);
        });
    }).fail(xhr => Q.xhrError(xhr)).always(() => "");
});

</script>