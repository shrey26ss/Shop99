@{
    ViewData["Title"] = "Home Page";
}

<style>


    .summary-block {
        margin-bottom: 11px;
        background-color: #e9ebef;
        padding: 17px 10px;
        border-radius: 5px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

        .summary-block i {
            font-size: 2.5rem;
            /*color: #00c0ef;*/
        }


    .summary-price {
        color: #007bff;
        font-size: 25px;
        font-weight: 400;
    }

    p.summary-text {
        margin-bottom: 0px;
    }



    .summary-title {
        font-weight: 700;
        font-size: 16px;
        color: #1c1e22;
        margin-bottom: 0px;
    }

</style>

<div class="content-header">
    <h1>
        Dashboard
    </h1>
</div>

<section class="content">
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-3 col-6">
                <div class="small-box bg-info">
                    <div class="inner">
                        <h3 id="CCount">0</h3>
                        <p>Pending Shipment</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-bag"></i>
                    </div>
                    <a class="small-box-footer" href="/OrderDetails/Index?type=3">
                        More info
                        <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <div class="small-box bg-yellow">
                    <div class="inner">
                        <h3 id="OCount">0</h3>
                        <p>Orders Placed</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-refresh"></i>
                    </div>
                    <a class="small-box-footer" href="/OrderDetails/Index?type=1">
                        More info
                        <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
            <div class="col-lg-3 col-6">
                <div class="small-box bg-gray">
                    <div class="inner">
                        <h3 id="PACount">0</h3>
                        <p>Pending Approval</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-person-add"></i>
                    </div>
                    <a class="small-box-footer" href="/Product/Attributes">
                        More info
                        <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
            @*<div class="col-lg-3 col-6">
                <div class="small-box bg-green">
                    <div class="inner">
                        <h3 id="RCCount">0</h3>
                        <p>Registered customers</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-person-add"></i>
                    </div>
                    <a class="small-box-footer" href="/CustumerDetails">
                        More info
                        <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>*@
            <div class="col-lg-3 col-6">
                <div class="small-box bg-red">
                    <div class="inner">
                        <h3 id="LSCount">0</h3>
                        <p>Low stock Variant</p>
                    </div>
                    <div class="icon">
                        <i class="ion ion-pie-graph"></i>
                    </div>
                    <a class="small-box-footer" href="/Report/Inventory?status=1">
                        More info
                        <i class="fas fa-arrow-circle-right"></i>
                    </a>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-3">
                <div class="card card-primary card-outline ">
                    <div class="card-header with-border">
                        <h3 class="card-title">
                            <i class="far fa-money-bill-alt"></i>
                            Revenue

                        </h3>

                    </div>
                    <div class="card-body p-3">
                        <div class="summary-block">
                            <div class="summary-content">

                                <div class="summary-price">
                                    <p class="summary-text"><i class="fa fa-inr"></i> 1,45,221</p>
                                    @*<span class="summary-small-text pull-right">1 month</span>*@
                                </div>
                                <div class="summary-head"><h5 class="summary-title">Today</h5></div>
                            </div>

                            <i class="far fa-money-bill-alt"></i>
                        </div>

                        <div class="summary-block">
                            <div class="summary-content">

                                <div class="summary-price">
                                    <p class="summary-text"><i class="fa fa-inr"></i> 58,54,793</p>
                                    @*<span class="summary-small-text pull-right">1 month</span>*@
                                </div>
                                <div class="summary-head"><h5 class="summary-title">This Month</h5></div>
                            </div>

                            <i class="far fa-money-bill-alt"></i>
                        </div>

                        <div class="summary-block">
                            <div class="summary-content">

                                <div class="summary-price">
                                    <p class="summary-text"><i class="fa fa-inr"></i> 100M</p>
                                    @*<span class="summary-small-text pull-right">1 month</span>*@
                                </div>
                                <div class="summary-head"><h5 class="summary-title">This Year</h5></div>
                            </div>

                            <i class="far fa-money-bill-alt"></i>
                        </div>

                    </div>

                </div>
            </div>

            <div class="col-md-6">
                <div class="card card-primary card-outline ">
                    <div class="card-header with-border">
                        <h3 class="card-title">
                            <i class="fas fa-cart-plus"></i>
                            Product Sold

                        </h3>
                        <a class="btn btn-xs btn-info btn-flat margin-l-10 float-right" href="#">View All</a>
                    </div>
                    <div class="card-body p-3">
                        <div class="chart" style="height: 300px;">
                            <img src="~/Image/LineChart-01.svg" alt="" class="w-100" />
                        </div>


                    </div>

                </div>
            </div>

            <div class="col-md-3">
                <div class="card card-primary card-outline ">
                    <div class="card-header with-border">
                        <h3 class="card-title">
                            <i class="fas fa-search"></i>
                            Popular Categories
                        </h3>

                    </div>
                    <div class="card-body p-3">
                        <table class="table table-bordered table-hover table-striped">
                            <thead>
                                <tr>
                                    <th>
                                        Categories
                                    </th>
                                    <th>
                                        Count
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="odd">
                                    <td>computer</td>
                                    <td>34</td>
                                </tr>
                                <tr class="even">
                                    <td>Mobile</td>
                                    <td>30</td>
                                </tr>
                                <tr class="odd">
                                    <td>jewelry</td>
                                    <td>27</td>
                                </tr>
                                <tr class="even">
                                    <td>shoes</td>
                                    <td>26</td>
                                </tr>
                                <tr class="odd">
                                    <td>jeans</td>
                                    <td>19</td>
                                </tr>

                                <tr class="even">
                                    <td>Headphones</td>
                                    <td>26</td>
                                </tr>

                                <tr class="odd">
                                    <td>Cloths</td>
                                    <td>19</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card card-primary card-outline " id="order-statistics-card">
                    <div class="card-header with-border">
                        <h3 class="card-title">
                            <i class="fas fa-shopping-cart"></i>
                            Orders
                        </h3>
                        <div class="card-tools float-right">
                            <button class="btn btn-xs btn-info btn-flat margin-r-5" data-chart-role="toggle-chart" data-chart-period="year">Year</button>
                            <button class="btn btn-xs btn-info btn-flat margin-r-5" data-chart-role="toggle-chart" data-chart-period="month">Month</button>
                            <button class="btn btn-xs btn-info btn-flat bg-light-blue" data-chart-role="toggle-chart" data-chart-period="week">Week</button>
                            @*<button type="button" class="btn btn-tool margin-l-10" data-card-widget="collapse">
                            <i class="fas fa-minus"></i>
                            </button>*@
                        </div>
                    </div>
                    <div class="card-body p-2">
                        <div class="chart" style="height: 300px; text-align: center;">
                            <img src="~/Image/order-summery.jpg" alt="" class="" />
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card card-primary card-outline " id="customer-statistics-card">
                    <div class="card-header with-border">
                        <h3 class="card-title">
                            <i class="far fa-user"></i>
                            Total Customers
                        </h3>
                        <div class="card-tools float-right">
                            <button class="btn btn-xs btn-info btn-flat margin-r-5" data-chart-role="toggle-chart" data-chart-period="year">Year</button>
                            <button class="btn btn-xs btn-info btn-flat margin-r-5" data-chart-role="toggle-chart" data-chart-period="month">Month</button>
                            <button class="btn btn-xs btn-info btn-flat bg-light-blue" data-chart-role="toggle-chart" data-chart-period="week">Week</button>
                            @*<button class="btn btn-tool margin-l-10" data-card-widget="collapse">
                            <i class="fas fa-minus"></i>
                            </button>*@
                        </div>
                    </div>
                    <div class="card-body p-2">
                        <div class="chart" style="height: 300px; text-align: center;">
                            <img src="~/Image/user.jpg" alt="" class="" />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="card card-primary card-outline " id="latest-orders-card">
                    <div class="card-header with-border">
                        <h3 class="card-title">
                            <i class="fas fa-cart-plus"></i>
                            Latest Orders
                        </h3>
                        <a class="btn btn-xs btn-info btn-flat margin-l-10 float-right" href="/OrderDetails/Index">View All Orders</a>
                    </div>
                    <div class="card-body p-2">

                        <table class="table table-bordered table-hover table-striped" id="ordertbl">
                            <thead>
                                <tr>
                                    <th>Order #</th>
                                    <th>Order status</th>
                                    <th>Customer</th>
                                    <th>Created on</th>
                                    <th>View</th>
                                </tr>
                            </thead>

                            <tbody>
                                <tr>
                                    <td>5</td>
                                    <td><span class="grid-report-item green btn-sm">Complete</span></td>
                                    <td>Headphone</td>
                                    <td>03/13/2017 4:20:10 AM</td>
                                    <td class="button-column">
                                        <a class="btn btn-default btn-sm" href="/Admin/Order/Edit/5"><i class="far fa-eye"></i>View</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td><span class="grid-report-item blue btn-sm">Processing</span></td>
                                    <td>Jeans</td>
                                    <td>03/13/2017 4:20:09 AM</td>
                                    <td class="button-column">
                                        <a class="btn btn-default btn-sm" href="/Admin/Order/Edit/4"><i class="far fa-eye"></i>View</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td><span class="grid-report-item yellow btn-sm">Pending</span></td>
                                    <td>Mobile</td>
                                    <td>03/13/2017 4:20:09 AM</td>
                                    <td class="button-column">
                                        <a class="btn btn-default btn-sm" href="/Admin/Order/Edit/4"><i class="far fa-eye"></i>View</a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>



                    </div>

                </div>
            </div>


        </div>



    </div>

</section>

@section scripts{
    <script>
        $(() => {
            fetchCounts();
            fetchOrders();
        });
        const fetchCounts = () => {
            $.post(`/T-B-C`).done((result) => {
                $('#OCount').text(result.totalOrdersPlaced);
                $('#CCount').text(result.confirmedOrder);
                $('#RCCount').text(result.totalCustomer);
                $('#LSCount').text(result.lowStocks);
                $('#PACount').text(result.totalPendingApprovel);
            })
        }
        const fetchOrders = () => {
            $.post(`/G-O-L`).done((result) => {
                if (result.length > 0) {
                    console.log('result OrderList :',result);
                    let __html = ``;
                    $.each(result,(i,v)=>{
                        let count = i + 1;
                        let statusTxt = v.statusID == 1 ? "Placed" : v.statusID == 2 ? "Canceled" : v.statusID == 3 ? "Confirmed" : v.statusID == 4 ? "Delivered" : v.statusID == 5 ? "Shipped" : "";
                        let statuscls = v.statusID == 1 ? "yellow" : v.statusID == 2 ? "red" : v.statusID == 3 ? "blue" : v.statusID == 4 ? "green" : v.statusID == 5 ? "green" : "";
                        
                        __html = __html + `<tr>
                            <td>${count}</td>
                            <td><span class="grid-report-item ${statuscls} btn-sm">${statusTxt}</span></td>
                            <td>${v.title}</td>
                            <td>${v.entryOn}</td>
                            <td class="button-column">
                            <a class="btn btn-default btn-sm" href="/OrderDetails/Index?type=${v.statusID}"><i class="far fa-eye"></i>View</a>
                            </td>
                        </tr>`;
                    })
                    $('#ordertbl tbody').html(__html);
                }
            })
        }
    </script>
}


